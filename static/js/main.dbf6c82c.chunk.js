(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{53:function(e,t,a){e.exports=a(68)},58:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n,r,s=a(0),i=a.n(s),c=a(11),l=a.n(c),o=(a(58),a(19));!function(e){e[e.Hidden=0]="Hidden",e[e.Revealed=1]="Revealed",e[e.Flagged=2]="Flagged",e[e.Visible=3]="Visible"}(n||(n={})),function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var u=a(5),d=a(30),m=a(39),f=function(e,t){return e.x*t+e.y},b=function(e,t){return{x:Math.floor(e/t),y:e%t}},g=function(e,t,a){for(var n=e.x,r=e.y,s=[],i=Math.max(n-1,0);i<=Math.min(n+1,t-1);i++)for(var c=Math.max(r-1,0);c<=Math.min(r+1,a-1);c++)i===n&&c===r||s.push(f({x:i,y:c},a));return s},v=function(e,t,a,r){for(var s={status:r?n.Visible:n.Hidden,isMine:!1,adjacentMinesCount:0},i=new Array(e*t).fill(void 0).map((function(){return Object(u.a)({},s)})),c=new Set;c.size<a;){var l=Math.floor(Math.random()*e*t);c.add(l)}for(var o=0;o<e;o++)for(var d=0;d<t;d++){var m=f({x:o,y:d},t);i[m].isMine=c.has(m),i[m].adjacentMinesCount=g({x:o,y:d},e,t).filter((function(e){return c.has(e)})).length}return i},E=function(e,t){return e.board[f(t,e.height)]},p=function(e){return e.board.filter((function(e){return e.status===n.Flagged}))},h=function(e){var t=e.board,a=e.coordinate,s=e.cell,i=e.width,c=e.height,l=e.mineCount;if(s.status!==n.Hidden&&s.status!==n.Visible)return[t,r.InProgress];var o=Object(d.a)(t);if(o[f(a,c)]=Object(u.a)(Object(u.a)({},s),{},{status:n.Revealed}),s.isMine)return[o,r.Lost];s.adjacentMinesCount||(o=function(e,t,a,r){var s,i=Object(d.a)(e),c=new Set(g(t,a,r).filter((function(t){return e[t].status!==n.Revealed}))),l=Object(m.a)(c);try{for(l.s();!(s=l.n()).done;){var o=s.value,f=i[o];if((f.status===n.Hidden||f.status===n.Visible)&&(i[o]=Object(u.a)(Object(u.a)({},f),{},{status:n.Revealed}),!f.adjacentMinesCount)){var v,E=g(b(o,r),a,r),p=Object(m.a)(E);try{for(p.s();!(v=p.n()).done;){var h=v.value,O=e[h];O.status!==n.Hidden&&O.status!==n.Visible||c.add(h)}}catch(j){p.e(j)}finally{p.f()}}}}catch(j){l.e(j)}finally{l.f()}return i}(o,a,i,c));var v=o.filter((function(e){return e.status!==n.Revealed}));return[o,v.length===l?r.Won:r.InProgress]},O=function(e,t){switch(t.type){case"CELL_REVEAL":if(e.status!==r.InProgress)return e;var a=E(e,t.payload),s=h(Object(u.a)(Object(u.a)({},e),{},{cell:a,coordinate:t.payload})),i=Object(o.a)(s,2),c=i[0],l=i[1];return Object(u.a)(Object(u.a)({},e),{},{board:c,status:l});case"CELL_FLAG":if(e.status!==r.InProgress)return e;var m=p(e),b=E(e,t.payload);if(!(e.mineCount-m.length)&&b.status!==n.Flagged)return Object(u.a)(Object(u.a)({},e),{},{showOutOfFlags:!0});var g=function(e){var t=e.board,a=e.flaggedCells,s=e.coordinate,i=e.cell,c=e.height,l=e.mineCount,o=e.isSuperman;if(i.status===n.Revealed)return[t,r.InProgress];var m=l-a.length,b=Object(d.a)(t);return b[f(s,c)]=Object(u.a)(Object(u.a)({},i),{},{status:i.status===n.Hidden||i.status===n.Visible?n.Flagged:o?n.Visible:n.Hidden}),i.isMine&&1===m&&!a.find((function(e){return!e.isMine}))?[b,r.Won]:[b,r.InProgress]}(Object(u.a)(Object(u.a)({},e),{},{flaggedCells:m,cell:b,coordinate:t.payload,isSuperman:!!e.isSuperman})),v=Object(o.a)(g,2),O=v[0],j=v[1];return Object(u.a)(Object(u.a)({},e),{},{board:O,status:j});case"NEW_GAME":return t.payload;case"HIDE_OUT_OF_FLAGS":return Object(u.a)(Object(u.a)({},e),{},{showOutOfFlags:!1});case"TOGGLE_SUPERMAN":return Object(u.a)(Object(u.a)({},e),{},{board:e.board.map((function(e){return t.payload?e.status===n.Hidden?Object(u.a)(Object(u.a)({},e),{},{status:n.Visible}):e:e.status===n.Visible?Object(u.a)(Object(u.a)({},e),{},{status:n.Hidden}):e})),isSuperman:t.payload});default:return e}},j={state:{status:r.InProgress,board:[],width:1,height:2,mineCount:3},dispatch:function(){}},y=i.a.createContext(j),C=O,w=a(45),N=a(43),M=a(37),L=(a(60),function(e){var t=e.cell;return t.status===n.Revealed||t.status===n.Visible?t.isMine?i.a.createElement("i",{className:"material-icons bomb"},"new_releases"):i.a.createElement("span",null,t.adjacentMinesCount||""):t.status===n.Flagged?i.a.createElement("i",{className:"material-icons flag"},"tour"):i.a.createElement("span",null)}),x=function(e){switch(e){case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";default:return""}},S=function(e){var t=Object(s.useContext)(y),a=t.state,r=t.dispatch,c=E(a,e);return i.a.createElement("div",{className:"cell-content ".concat(n[c.status].toLowerCase()," ").concat(x(c.adjacentMinesCount)),onClick:function(t){t.shiftKey?r({type:"CELL_FLAG",payload:e}):r({type:"CELL_REVEAL",payload:e})}},i.a.createElement(L,{cell:c}))},I=(a(61),i.a.memo((function(e){return i.a.createElement("div",{style:e.style},i.a.createElement("div",{className:"cell"},i.a.createElement(S,{y:e.rowIndex,x:e.columnIndex})))}),M.b)),F=i.a.forwardRef((function(e,t){var a=Object(s.useContext)(y).state;return i.a.createElement(N.a,null,(function(e){var n=e.height,r=e.width;return i.a.createElement(M.a,{className:"minesweeper-grid",columnCount:a.width,columnWidth:50,height:n,rowCount:a.height,rowHeight:50,width:r,ref:t},I)}))})),P=(a(62),function(){return i.a.createElement("div",{"data-testid":"confetti"},i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}),i.a.createElement("div",{className:"confetti"}))}),R=a(97),_=a(100),G=a(96),H=a(95),A=function(e){var t=e.status,a=e.onClose;return i.a.createElement(_.a,{open:t!==r.InProgress,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(H.a,{id:"alert-dialog-title"},function(e){switch(e){case r.Won:return"You win!";case r.Lost:return"You lose :(";case r.InProgress:return"Restarting..."}}(t)),i.a.createElement(G.a,null,i.a.createElement(R.a,{onClick:a,color:"primary",autoFocus:!0},"Play again")))},V=function(e){var t=e.open,a=e.onClose;return i.a.createElement(_.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(H.a,{id:"alert-dialog-title"},"No more flags left."),i.a.createElement(G.a,null,i.a.createElement(R.a,{onClick:a,color:"primary",autoFocus:!0},"OK")))},W=a(103),T=a(99),k=a(98),B=a(102),D=a(101),J=Object(k.a)((function(e){return Object(B.a)({configuration:{padding:e.spacing(1)},sliders:{display:"flex"},inputContainer:{padding:"10px",flex:1},buttons:{textAlign:"left","& > *":{margin:e.spacing(1)}}})})),U=i.a.memo((function(e){var t=e.newGame,a=Object(s.useContext)(y),n=a.state,r=a.dispatch,c=Object(s.useState)(n.width),l=Object(o.a)(c,2),u=l[0],d=l[1],m=Object(s.useState)(n.height),f=Object(o.a)(m,2),b=f[0],g=f[1],v=Object(s.useState)(n.mineCount),E=Object(o.a)(v,2),p=E[0],h=E[1],O=J();return i.a.createElement("div",{className:O.configuration},i.a.createElement("div",{className:O.sliders},i.a.createElement("div",{className:O.inputContainer},i.a.createElement(w.a,{gutterBottom:!0},"Width"),i.a.createElement(W.a,{value:u,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){d(t)},"aria-labelledby":"continuous-slider"})),i.a.createElement("div",{className:O.inputContainer},i.a.createElement(w.a,{gutterBottom:!0},"Height"),i.a.createElement(W.a,{value:b,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){g(t)},"aria-labelledby":"continuous-slider"})),i.a.createElement("div",{className:O.inputContainer},i.a.createElement(w.a,{gutterBottom:!0},"Mines"),i.a.createElement(W.a,{value:p,min:1,max:u*b,valueLabelDisplay:"auto",onChange:function(e,t){h(t)},"aria-labelledby":"continuous-slider"}))),i.a.createElement("div",{className:O.buttons},i.a.createElement(R.a,{variant:"contained",color:"primary",onClick:function(){return t(u,b,Math.min(p,u*b))}},"New Game"),i.a.createElement(T.a,{control:i.a.createElement(D.a,{checked:n.isSuperman,onChange:function(){return r({type:"TOGGLE_SUPERMAN",payload:!n.isSuperman})},name:"superman"}),label:"Superman"})))})),K=(a(67),function(){var e=Object(s.useContext)(y),t=e.state,a=e.dispatch,n=t.mineCount-p(t).length,c=Object(s.useRef)(null);return i.a.createElement("div",{className:"minesweeper-container"},t.status===r.Won&&i.a.createElement(P,null),i.a.createElement(U,{newGame:function(e,n,s){var i;a({type:"NEW_GAME",payload:{status:r.InProgress,width:e,height:n,mineCount:s,board:v(e,n,s,t.isSuperman),isSuperman:t.isSuperman}}),null===(i=c.current)||void 0===i||i.scrollTo({scrollLeft:0,scrollTop:0})}}),i.a.createElement(V,{open:!!t.showOutOfFlags,onClose:function(){return a({type:"HIDE_OUT_OF_FLAGS"})}}),i.a.createElement(A,{status:t.status,onClose:function(){var e;a({type:"NEW_GAME",payload:Object(u.a)(Object(u.a)({},t),{},{status:r.InProgress,board:v(t.width,t.height,t.mineCount,t.isSuperman)})}),null===(e=c.current)||void 0===e||e.scrollTo({scrollLeft:0,scrollTop:0})}}),i.a.createElement(w.a,{gutterBottom:!0},"Flags left: ",n),i.a.createElement("div",{className:"grid-container"},i.a.createElement(F,{ref:c})))}),Y=localStorage.getItem("state"),z=Y?JSON.parse(Y):{status:r.InProgress,board:v(10,10,10),width:10,height:10,mineCount:10};var q=function(){var e=Object(s.useReducer)(C,z),t=Object(o.a)(e,2),a=t[0],n=t[1];return localStorage.setItem("state",JSON.stringify(a)),i.a.createElement(y.Provider,{value:{state:a,dispatch:n}},i.a.createElement(K,null))};l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.dbf6c82c.chunk.js.map