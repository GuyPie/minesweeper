(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{52:function(e,t,a){e.exports=a(67)},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n,r,i=a(0),s=a.n(i),l=a(11),c=a.n(l),o=(a(57),a(19));!function(e){e[e.Hidden=0]="Hidden",e[e.Revealed=1]="Revealed",e[e.Flagged=2]="Flagged",e[e.Visible=3]="Visible"}(n||(n={})),function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var u=a(5),d=a(26),m=function(e,t,a,n){for(var r=t.x,i=t.y,s=[],l=Math.max(r-1,0);l<=Math.min(r+1,a-1);l++)for(var c=Math.max(i-1,0);c<=Math.min(i+1,n-1);c++)l===r&&c===i||s.push({x:l,y:c});return s},f=function(e,t,a,r){for(var i={status:r?n.Visible:n.Hidden,isMine:!1,adjacentMinesCount:0},s=new Array(e*t).fill(void 0).map((function(){return Object(u.a)({},i)})),l=new Set;l.size<a;){var c=Math.floor(Math.random()*e*t);l.add(c)}for(var o=0;o<e;o++)for(var d=0;d<t;d++){var f=o*t+d;s[f].isMine=l.has(f),s[f].adjacentMinesCount=m(0,{x:o,y:d},e,t).filter((function(e){return l.has(e.x*t+e.y)})).length}return s},b=function(e,t){return e.board[t.x*e.height+t.y]},g=function(e){return e.board.filter((function(e){return e.status===n.Flagged}))},p=function(e){var t=e.board,a=e.coordinate,i=e.cell,s=e.width,l=e.height,c=e.mineCount;if(i.status!==n.Hidden&&i.status!==n.Visible)return[t,r.InProgress];var o=Object(d.a)(t);if(o[a.x*l+a.y]=Object(u.a)(Object(u.a)({},i),{},{status:n.Revealed}),i.isMine)return[o,r.Lost];i.adjacentMinesCount||(o=function(e,t,a,r){for(var i=Object(d.a)(e),s=m(0,t,a,r).filter((function(t){return e[t.x*r+t.y].status!==n.Revealed}));s.length;){var l=s.shift(),c=i[l.x*r+l.y];c.status!==n.Hidden&&c.status!==n.Visible||(i[l.x*r+l.y]=Object(u.a)(Object(u.a)({},c),{},{status:n.Revealed}),c.adjacentMinesCount||s.push.apply(s,Object(d.a)(m(0,l,a,r).filter((function(t){var a=e[t.x*r+t.y];return a.status===n.Hidden||a.status===n.Visible})))))}return i}(o,a,s,l));var f=o.filter((function(e){return e.status!==n.Revealed}));return[o,f.length===c?r.Won:r.InProgress]},E=function(e,t){switch(t.type){case"CELL_REVEAL":if(e.status!==r.InProgress)return e;var a=b(e,t.payload),i=p(Object(u.a)(Object(u.a)({},e),{},{cell:a,coordinate:t.payload})),s=Object(o.a)(i,2),l=s[0],c=s[1];return Object(u.a)(Object(u.a)({},e),{},{board:l,status:c});case"CELL_FLAG":if(e.status!==r.InProgress)return e;var m=g(e),f=b(e,t.payload);if(!(e.mineCount-m.length)&&f.status!==n.Flagged)return Object(u.a)(Object(u.a)({},e),{},{showOutOfFlags:!0});var E=function(e){var t=e.board,a=e.flaggedCells,i=e.coordinate,s=e.cell,l=e.height,c=e.mineCount,o=e.isSuperman;if(s.status===n.Revealed)return[t,r.InProgress];var m=c-a.length,f=Object(d.a)(t);return f[i.x*l+i.y]=Object(u.a)(Object(u.a)({},s),{},{status:s.status===n.Hidden||s.status===n.Visible?n.Flagged:o?n.Visible:n.Hidden}),s.isMine&&1===m&&!a.find((function(e){return!e.isMine}))?[f,r.Won]:[f,r.InProgress]}(Object(u.a)(Object(u.a)({},e),{},{flaggedCells:m,cell:f,coordinate:t.payload,isSuperman:!!e.isSuperman})),v=Object(o.a)(E,2),h=v[0],O=v[1];return Object(u.a)(Object(u.a)({},e),{},{board:h,status:O});case"NEW_GAME":return t.payload;case"HIDE_OUT_OF_FLAGS":return Object(u.a)(Object(u.a)({},e),{},{showOutOfFlags:!1});case"TOGGLE_SUPERMAN":return Object(u.a)(Object(u.a)({},e),{},{board:e.board.map((function(e){return t.payload?e.status===n.Hidden?Object(u.a)(Object(u.a)({},e),{},{status:n.Visible}):e:e.status===n.Visible?Object(u.a)(Object(u.a)({},e),{},{status:n.Hidden}):e})),isSuperman:t.payload});default:return e}},v={state:{status:r.InProgress,board:[],width:1,height:2,mineCount:3},dispatch:function(){}},h=s.a.createContext(v),O=E,j=a(44),y=a(42),C=a(37),w=(a(59),function(e){switch(e){case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";default:return""}}),N=function(e){var t=e.cell;return t.status===n.Revealed||t.status===n.Visible?t.isMine?s.a.createElement("i",{className:"material-icons bomb"},"new_releases"):s.a.createElement("span",null,t.adjacentMinesCount||""):t.status===n.Flagged?s.a.createElement("i",{className:"material-icons flag"},"tour"):s.a.createElement("span",null)},x=function(e){var t=e.cell,a=e.onClick;return s.a.createElement("div",{className:"cell-content ".concat(n[t.status].toLowerCase()," ").concat(w(t.adjacentMinesCount)),onClick:a},s.a.createElement(N,{cell:t}))},L=function(e){var t=Object(i.useContext)(h),a=t.state,n=t.dispatch,r=b(a,e);return s.a.createElement(x,{cell:r,onClick:function(t){t.shiftKey?n({type:"CELL_FLAG",payload:e}):n({type:"CELL_REVEAL",payload:e})}})},M=(a(60),s.a.memo((function(e){return s.a.createElement("div",{style:e.style},s.a.createElement("div",{className:"cell"},s.a.createElement(L,{y:e.rowIndex,x:e.columnIndex})))}),C.b)),S=s.a.forwardRef((function(e,t){var a=Object(i.useContext)(h).state;return s.a.createElement(y.a,null,(function(e){var n=e.height,r=e.width;return s.a.createElement(C.a,{className:"minesweeper-grid",columnCount:a.width,columnWidth:50,height:n,rowCount:a.height,rowHeight:50,width:r,ref:t},M)}))})),I=(a(61),function(){return s.a.createElement("div",{"data-testid":"confetti"},s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}),s.a.createElement("div",{className:"confetti"}))}),F=a(96),P=a(99),R=a(95),_=a(94),G=function(e){var t=e.status,a=e.onClose;return s.a.createElement(P.a,{open:t!==r.InProgress,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(_.a,{id:"alert-dialog-title"},function(e){switch(e){case r.Won:return"You win!";case r.Lost:return"You lose :(";case r.InProgress:return"Restarting..."}}(t)),s.a.createElement(R.a,null,s.a.createElement(F.a,{onClick:a,color:"primary",autoFocus:!0},"Play again")))},H=function(e){var t=e.open,a=e.onClose;return s.a.createElement(P.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(_.a,{id:"alert-dialog-title"},"No more flags left."),s.a.createElement(R.a,null,s.a.createElement(F.a,{onClick:a,color:"primary",autoFocus:!0},"OK")))},A=a(102),V=a(98),W=a(97),k=a(101),T=a(100),B=Object(W.a)((function(e){return Object(k.a)({configuration:{padding:e.spacing(1)},sliders:{display:"flex"},inputContainer:{padding:"10px",flex:1},buttons:{textAlign:"left","& > *":{margin:e.spacing(1)}}})})),D=function(e){var t=e.newGame,a=Object(i.useContext)(h),n=a.state,r=a.dispatch,l=Object(i.useState)(n.width),c=Object(o.a)(l,2),u=c[0],d=c[1],m=Object(i.useState)(n.height),f=Object(o.a)(m,2),b=f[0],g=f[1],p=Object(i.useState)(n.mineCount),E=Object(o.a)(p,2),v=E[0],O=E[1],y=B();return s.a.createElement("div",{className:y.configuration},s.a.createElement("div",{className:y.sliders},s.a.createElement("div",{className:y.inputContainer},s.a.createElement(j.a,{gutterBottom:!0},"Width"),s.a.createElement(A.a,{value:u,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){d(t)},"aria-labelledby":"continuous-slider"})),s.a.createElement("div",{className:y.inputContainer},s.a.createElement(j.a,{gutterBottom:!0},"Height"),s.a.createElement(A.a,{value:b,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){g(t)},"aria-labelledby":"continuous-slider"})),s.a.createElement("div",{className:y.inputContainer},s.a.createElement(j.a,{gutterBottom:!0},"Mines"),s.a.createElement(A.a,{value:v,min:1,max:u*b,valueLabelDisplay:"auto",onChange:function(e,t){O(t)},"aria-labelledby":"continuous-slider"}))),s.a.createElement("div",{className:y.buttons},s.a.createElement(F.a,{variant:"contained",color:"primary",onClick:function(){return t(u,b,Math.min(v,u*b))}},"New Game"),s.a.createElement(V.a,{control:s.a.createElement(T.a,{checked:n.isSuperman,onChange:function(){return r({type:"TOGGLE_SUPERMAN",payload:!n.isSuperman})},name:"superman"}),label:"Superman"})))},J=(a(66),function(){var e=Object(i.useContext)(h),t=e.state,a=e.dispatch,n=t.mineCount-g(t).length,l=Object(i.useRef)(null);return s.a.createElement("div",{className:"minesweeper-container"},t.status===r.Won&&s.a.createElement(I,null),s.a.createElement(D,{newGame:function(e,n,i){var s;a({type:"NEW_GAME",payload:{status:r.InProgress,width:e,height:n,mineCount:i,board:f(e,n,i,t.isSuperman),isSuperman:t.isSuperman}}),null===(s=l.current)||void 0===s||s.scrollTo({scrollLeft:0,scrollTop:0})}}),s.a.createElement(H,{open:!!t.showOutOfFlags,onClose:function(){return a({type:"HIDE_OUT_OF_FLAGS"})}}),s.a.createElement(G,{status:t.status,onClose:function(){var e;a({type:"NEW_GAME",payload:Object(u.a)(Object(u.a)({},t),{},{status:r.InProgress,board:f(t.width,t.height,t.mineCount,t.isSuperman)})}),null===(e=l.current)||void 0===e||e.scrollTo({scrollLeft:0,scrollTop:0})}}),s.a.createElement(j.a,{gutterBottom:!0},"Flags left: ",n),s.a.createElement("div",{className:"grid-container"},s.a.createElement(S,{ref:l})))}),U=localStorage.getItem("state"),K=U?JSON.parse(U):{status:r.InProgress,board:f(10,10,10),width:10,height:10,mineCount:10};var Y=function(){var e=Object(i.useReducer)(O,K),t=Object(o.a)(e,2),a=t[0],n=t[1];return localStorage.setItem("state",JSON.stringify(a)),s.a.createElement(h.Provider,{value:{state:a,dispatch:n}},s.a.createElement(J,null))};c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(Y,null)),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.ceafb223.chunk.js.map