(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{57:function(e,t,a){e.exports=a(72)},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n,r,s=a(40),i=a.n(s),c=a(46),l=a(0),o=a.n(l),u=a(11),d=a.n(u),m=a(32),f=a.n(m),b=a(19);!function(e){e[e.Hidden=0]="Hidden",e[e.Revealed=1]="Revealed",e[e.Flagged=2]="Flagged",e[e.Visible=3]="Visible"}(n||(n={})),function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var g=a(5),h=a(30),v=a(41),E=function(e,t){return e.x*t+e.y},p=function(e,t,a){for(var n=Math.floor(e/a),r=e%a,s=[],i=Math.max(n-1,0);i<=Math.min(n+1,t-1);i++)for(var c=Math.max(r-1,0);c<=Math.min(r+1,a-1);c++)i===n&&c===r||s.push(E({x:i,y:c},a));return s},O=function(e,t,a,r){for(var s=new Array(e*t),i=new Set;i.size<a;){var c=Math.floor(Math.random()*e*t);i.add(c)}for(var l=0;l<e*t;l++)s[l]={status:r?n.Visible:n.Hidden,isMine:i.has(l),adjacentMinesCount:p(l,e,t).filter((function(e){return i.has(e)})).length};return s},j=function(e){return e.board.filter((function(e){return e.status===n.Flagged}))},y=function(e){var t=e.board,a=e.index,s=e.width,i=e.height,c=e.mineCount,l=Object(h.a)(t);if(l[a]=Object(g.a)(Object(g.a)({},l[a]),{},{status:n.Revealed}),l[a].isMine)return[l,r.Lost];l[a].adjacentMinesCount||(l=function(e,t,a,r){var s,i=Object(h.a)(e),c=new Set(p(t,a,r).filter((function(t){return e[t].status!==n.Revealed}))),l=Object(v.a)(c);try{for(l.s();!(s=l.n()).done;){var o=s.value,u=i[o];if((u.status===n.Hidden||u.status===n.Visible)&&(i[o]=Object(g.a)(Object(g.a)({},u),{},{status:n.Revealed}),!u.adjacentMinesCount)){var d,m=p(o,a,r),f=Object(v.a)(m);try{for(f.s();!(d=f.n()).done;){var b=d.value;c.add(b)}}catch(E){f.e(E)}finally{f.f()}}}}catch(E){l.e(E)}finally{l.f()}return i}(l,a,s,i));var o=l.filter((function(e){return e.status!==n.Revealed}));return[l,o.length===c?r.Won:r.InProgress]},C=function(e,t){switch(t.type){case"CELL_REVEAL":if(e.status!==r.InProgress)return e;var a=E(t.payload,e.height);if(e.board[a].status!==n.Hidden&&e.board[a].status!==n.Visible)return e;var s=y(Object(g.a)(Object(g.a)({},e),{},{index:a})),i=Object(b.a)(s,2),c=i[0],l=i[1];return Object(g.a)(Object(g.a)({},e),{},{board:c,status:l});case"CELL_FLAG":if(e.status!==r.InProgress)return e;var o=E(t.payload,e.height);if(e.board[o].status===n.Revealed)return e;var u=j(e);if(!(e.mineCount-u.length)&&e.board[o].status!==n.Flagged)return Object(g.a)(Object(g.a)({},e),{},{showOutOfFlags:!0});var d=function(e){var t=e.board,a=e.index,s=e.flaggedCells,i=e.mineCount,c=e.isSuperman,l=i-s.length,o=Object(h.a)(t);return o[a]=Object(g.a)(Object(g.a)({},o[a]),{},{status:o[a].status===n.Flagged?c?n.Visible:n.Hidden:n.Flagged}),o[a].isMine&&1===l&&o[a].status===n.Flagged&&!s.find((function(e){return!e.isMine}))?[o,r.Won]:[o,r.InProgress]}(Object(g.a)(Object(g.a)({},e),{},{index:o,flaggedCells:u})),m=Object(b.a)(d,2),f=m[0],v=m[1];return Object(g.a)(Object(g.a)({},e),{},{board:f,status:v});case"NEW_GAME":return t.payload;case"HIDE_OUT_OF_FLAGS":return Object(g.a)(Object(g.a)({},e),{},{showOutOfFlags:!1});case"TOGGLE_SUPERMAN":return Object(g.a)(Object(g.a)({},e),{},{board:e.board.map((function(e){return t.payload?e.status===n.Hidden?Object(g.a)(Object(g.a)({},e),{},{status:n.Visible}):e:e.status===n.Visible?Object(g.a)(Object(g.a)({},e),{},{status:n.Hidden}):e})),isSuperman:t.payload});default:return e}},w={state:{status:r.InProgress,board:[],width:1,height:2,mineCount:3},dispatch:function(){}},N=o.a.createContext(w),x=C,L=a(49),M=a(47),S=a(38),F=(a(63),function(e){var t=e.cell;return t.status===n.Revealed||t.status===n.Visible?t.isMine?o.a.createElement("i",{className:"material-icons bomb"},"new_releases"):o.a.createElement("span",null,t.adjacentMinesCount||""):t.status===n.Flagged?o.a.createElement("i",{className:"material-icons flag"},"tour"):o.a.createElement("span",null)}),I=function(e){switch(e){case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";default:return""}},P=function(e){var t=Object(l.useContext)(N),a=t.state,r=t.dispatch,s=function(e,t){return e.board[E(t,e.height)]}(a,e);return o.a.createElement("div",{className:"cell-content ".concat(n[s.status].toLowerCase()," ").concat(I(s.adjacentMinesCount)),onClick:function(t){t.shiftKey?r({type:"CELL_FLAG",payload:e}):r({type:"CELL_REVEAL",payload:e})}},o.a.createElement(F,{cell:s}))},R=(a(64),o.a.memo((function(e){return o.a.createElement("div",{style:e.style},o.a.createElement("div",{className:"cell"},o.a.createElement(P,{y:e.rowIndex,x:e.columnIndex})))}),S.b)),_=o.a.forwardRef((function(e,t){var a=Object(l.useContext)(N).state;return o.a.createElement(M.a,null,(function(e){var n=e.height,r=e.width;return o.a.createElement(S.a,{className:"minesweeper-grid",columnCount:a.width,columnWidth:50,height:n,rowCount:a.height,rowHeight:50,width:r,ref:t},R)}))})),G=(a(65),function(){return o.a.createElement("div",{"data-testid":"confetti"},o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}),o.a.createElement("div",{className:"confetti"}))}),A=a(101),H=a(104),V=a(100),W=a(99),k=function(e){var t=e.status,a=e.onClose;return o.a.createElement(H.a,{open:t!==r.InProgress,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(W.a,{id:"alert-dialog-title"},function(e){switch(e){case r.Won:return"You win!";case r.Lost:return"You lose :(";case r.InProgress:return"Restarting..."}}(t)),o.a.createElement(V.a,null,o.a.createElement(A.a,{onClick:a,color:"primary",autoFocus:!0},"Play again")))},T=function(e){var t=e.open,a=e.onClose;return o.a.createElement(H.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(W.a,{id:"alert-dialog-title"},"No more flags left."),o.a.createElement(V.a,null,o.a.createElement(A.a,{onClick:a,color:"primary",autoFocus:!0},"OK")))},B=a(107),D=a(103),U=a(102),J=a(106),K=a(105),Y=Object(U.a)((function(e){return Object(J.a)({configuration:{padding:e.spacing(1)},sliders:{display:"flex"},inputContainer:{padding:"10px",flex:1},buttons:{textAlign:"left","& > *":{margin:e.spacing(1)}}})})),z=o.a.memo((function(e){var t=e.newGame,a=Object(l.useContext)(N),n=a.state,r=a.dispatch,s=Object(l.useState)(n.width),i=Object(b.a)(s,2),c=i[0],u=i[1],d=Object(l.useState)(n.height),m=Object(b.a)(d,2),f=m[0],g=m[1],h=Object(l.useState)(n.mineCount),v=Object(b.a)(h,2),E=v[0],p=v[1],O=Y();return o.a.createElement("div",{className:O.configuration},o.a.createElement("div",{className:O.sliders},o.a.createElement("div",{className:O.inputContainer},o.a.createElement(L.a,{gutterBottom:!0},"Width"),o.a.createElement(B.a,{value:c,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){u(t)},"aria-labelledby":"continuous-slider"})),o.a.createElement("div",{className:O.inputContainer},o.a.createElement(L.a,{gutterBottom:!0},"Height"),o.a.createElement(B.a,{value:f,min:3,max:300,valueLabelDisplay:"auto",onChange:function(e,t){g(t)},"aria-labelledby":"continuous-slider"})),o.a.createElement("div",{className:O.inputContainer},o.a.createElement(L.a,{gutterBottom:!0},"Mines"),o.a.createElement(B.a,{value:E,min:1,max:c*f,valueLabelDisplay:"auto",onChange:function(e,t){p(t)},"aria-labelledby":"continuous-slider"}))),o.a.createElement("div",{className:O.buttons},o.a.createElement(A.a,{variant:"contained",color:"primary",onClick:function(){return t(c,f,Math.min(E,c*f))}},"New Game"),o.a.createElement(D.a,{control:o.a.createElement(K.a,{checked:n.isSuperman,onChange:function(){return r({type:"TOGGLE_SUPERMAN",payload:!n.isSuperman})},name:"superman"}),label:"Superman"})))})),q=(a(70),function(){var e=Object(l.useContext)(N),t=e.state,a=e.dispatch,n=t.mineCount-j(t).length,s=Object(l.useRef)(null);return o.a.createElement("div",{className:"minesweeper-container"},t.status===r.Won&&o.a.createElement(G,null),o.a.createElement(z,{newGame:function(e,n,i){var c;a({type:"NEW_GAME",payload:{status:r.InProgress,width:e,height:n,mineCount:i,board:O(e,n,i,t.isSuperman),isSuperman:t.isSuperman}}),null===(c=s.current)||void 0===c||c.scrollTo({scrollLeft:0,scrollTop:0})}}),o.a.createElement(T,{open:!!t.showOutOfFlags,onClose:function(){return a({type:"HIDE_OUT_OF_FLAGS"})}}),o.a.createElement(k,{status:t.status,onClose:function(){var e;a({type:"NEW_GAME",payload:Object(g.a)(Object(g.a)({},t),{},{status:r.InProgress,board:O(t.width,t.height,t.mineCount,t.isSuperman)})}),null===(e=s.current)||void 0===e||e.scrollTo({scrollLeft:0,scrollTop:0})}}),o.a.createElement(L.a,{gutterBottom:!0},"Flags left: ",n),o.a.createElement("div",{className:"grid-container"},o.a.createElement(_,{ref:s})))}),Q={status:r.InProgress,board:O(10,10,10),width:10,height:10,mineCount:10};var X=function(e){var t=e.persistedState,a=Object(l.useReducer)(x,t||Q),n=Object(b.a)(a,2),r=n[0],s=n[1];return f.a.setItem("state",r),o.a.createElement(N.Provider,{value:{state:r,dispatch:s}},o.a.createElement(q,null))};a(71);(function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.getItem("state");case 2:t=e.sent,d.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(X,{persistedState:t})),document.getElementById("root"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[57,1,2]]]);
//# sourceMappingURL=main.6f622895.chunk.js.map